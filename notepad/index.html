<!DOCTYPE html>

<html lang="es">

    <head>

        <meta charset="UTF-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="color-scheme" content="dark">

        <title> Notepad </title>

        <style>

            * {
                box-sizing: border-box;
                max-width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                font-family: 'Comic Neue', sans-serif;
                font-size: 14px;
                user-select: none;
            }

            html {
                background: #333;
            }

            .container {
                color: #fff;
            }

            h1 {
                text-align: center;
                font-size: 24px;
                margin-bottom: 20px;
            }

            #export_btn {
                display: inline-block;
                position: fixed;
                z-index: 999;
                top: 25vh;
                right: 10px;
                width: 40px;
                height: 40px;
                border: 2px solid #fff;
                border-radius: 25px;
                background: #fff7;
                cursor: pointer;
            }

            #export_btn svg {
                width: 100%;
                height: 100%;
                padding: 5px;
            }
        </style>
    </head>

    <body>

        <div class="container">

            <h1> Notepad </h1>

            <tinymce-editor></tinymce-editor>

            <a id="export_btn">

                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z"/></svg>
            </a>

        </div>

        <script src="notepad/tinymce.min.js"></script>

        <script>

            tinymce.init({

                selector: 'tinymce-editor',
                skin: 'oxide-dark',
                content_css: 'dark',
                plugins: 'quickbars fullscreen wordcount emoticons link autolink codesample image autoresize',
                toolbar: 'fullscreen print undo redo styles wordcount emoticons link codesample image',
                contextmenu_never_use_native: true,
                min_height: 200
            });

            exportBtn = document.getElementById("export_btn");

            function isEmptyOrSpaces (str) {

                return str == null || str.match(/^\s*$/) !== null;
            }

            setInterval(()=>{

                content = tinymce.activeEditor.getContent( {format: "text"} );

                switch ( isEmptyOrSpaces(content) ) {

                    case false:

                        exportBtn.href = "data:application/octet-stream," + encodeURIComponent(content);

                        exportBtn.download = "notes.txt";

                    break;
                }
            }, 500);
        </script>
    </body>
</html>