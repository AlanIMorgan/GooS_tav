<!DOCTYPE html>

<html lang="es">

    <head>

        <meta charset="UTF-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="color-scheme" content="dark">

        <title> PDF Viewer </title>

        <style>

            * {
                box-sizing: border-box;
                max-width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                font-family: 'Comic Neue', sans-serif;
                font-size: 14px;
                user-select: none;
            }

            .container {
                height: 100vh;
                background: #333;
                color: #fff;
            }

            h1, h2, label {
                text-align: center;
                margin-bottom: 20px;
            }

            h1 {
                font-size: 24px;
            }

            label {
                display: block;
                margin-top: 20px;
                cursor: pointer;
                text-decoration: underline;
            }

            #file_picker {
                display: none;
            }

            #content_viewer {
                display: none;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body>

        <div class="container">

            <h1> PDF Viewer </h1>

            <h2> Crea un nuevo documento PDF: </h2>

            <tinymce-editor></tinymce-editor>

            <label for="file_picker"> O abre un pdf existente: </label>

            <input id="file_picker" type="file" accept=".pdf" placeholder="O abre uno existente">

            <div id="content_viewer"></div>

        </div><!-- 

        <script src="notepad/tinymce.min.js"></script>

        <script>

            tinymce.init({

                selector: 'tinymce-editor',
                skin: 'oxide-dark',
                content_css: 'dark',
                plugins: 'quickbars fullscreen wordcount emoticons link autolink codesample image autoresize',
                toolbar: 'fullscreen print undo redo styles wordcount emoticons link codesample image',
                contextmenu_never_use_native: true
            });
        </script> -->

        <script src="pdf_js/lib/webviewer.min.js"></script>

        <script>

            contentViewer = document.getElementById("content_viewer");

            filePicker = document.getElementById("file_picker");

            WebViewer({

                path: "pdf_js/lib",
                licenseKey: "6zW0R6V1E0ES5TUAHlTS"
            }, contentViewer)

            .then(instance => {

                filePicker.addEventListener('change', ()=>{ // Get the file from the input

                    const file = filePicker.files[0];

                    instance.UI.loadDocument(file, { filename: file.name });
                });

                const { documentViewer } = instance.Core;

                documentViewer.addEventListener('documentLoaded', () => { // perform document operations
                });
            }); /* 

            filePicker.addEventListener("input", ()=>{

                contentViewer.innerHTML = '';

                pdf = filePicker.files[0].type.includes("/pdf") ? filePicker.files[0] : false;

                let fileReader = new FileReader();

                fileReader.readAsDataURL(pdf);

                fileReader.addEventListener("load", ()=>{

                    let src = fileReader.result;

                    contentViewer.src = src;

                    contentViewer.style = "display: inline-block";
                });
            }); */
        </script>
    </body>
</html>